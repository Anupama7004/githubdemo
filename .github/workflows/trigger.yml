name: Trigger Schedule Workflow

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:
  schedule:
    # 5:30 PM IST == 12:00 PM (noon) UTC
    - cron: '0 12 * * *'

jobs:
  identify-trigger:
    runs-on: ubuntu-latest
    steps:
      - name: Echo trigger source
        run: |
          echo "event_name=${{ github.event_name }}"
          if [ "${{ github.event_name }}" = "push" ]; then
            echo "Workflow triggered by PUSH"
          elif [ "${{ github.event_name }}" = "pull_request" ]; then
            echo "Workflow triggered by PULL REQUEST"
          elif [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
            echo "Workflow triggered by MANUAL DISPATCH"
          elif [ "${{ github.event_name }}" = "schedule" ]; then
            echo "Workflow triggered by SCHEDULE (CRON)"
          else
            echo "Workflow triggered by another event"
          fi

      - name: Print timestamps (UTC and local)
        run: |
          echo "Now (UTC):   $(date -u +"%Y-%m-%d %H:%M:%S UTC")"
          echo "Now (Local): $(date +"%Y-%m-%d %H:%M:%S %Z")"
